% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simEventRF.R
\name{simEventRF}
\alias{simEventRF}
\title{Simulate Survival and Competing Risk Data Based on a fitted RF}
\usage{
simEventRF(
  N,
  RF_fit,
  event_names = NULL,
  list_old_vars = NULL,
  n_event_max = c(1, 1),
  term_events = c(1, 2)
)
}
\arguments{
\item{N}{Integer. The number of individuals to simulate.}

\item{RF_fit}{A rfsrc object. The object contains estimates of the cumulative hazard of each of the processes.}

\item{event_names}{A character vector. Containing the names of the various processes.
The argument is optional. By default events will be named \code{N1}, \code{N2}, ....}

\item{list_old_vars}{A named list containing the old covariates. New covariates will
be simulated by drawing from the old covariates with replacement.}

\item{n_event_max}{Integer vector. Maximum number of times each event type can occur
per individual. Since \code{rfsrc} can only be fitted to survival and competing risk data,
this argument should always be a vector of 1's which length is the number of processes.}

\item{term_events}{Integer vector. Indices of event types that are terminal,
i.e., events that stop further simulation for an individual. Since we are only dealing
with survival and competing risk data, this argument should be a sequence starting from 1
and up to the number of events.}
}
\value{
A \code{data.table} with one row per event per individual containing:
\itemize{
\item \code{ID} — Individual identifier.
\item \code{Time} — Event time.
\item \code{Delta} — Event type indicator.
\item Baseline covariates \code{L0}, \code{A0}.
\item Columns for each event type indicating cumulative event counts.
}
}
\description{
The \code{simEventRF} function simulates survival or competing risk data for a cohort
of individuals based on a random forest fitted using the \code{randomForestSRC} package.
The function is used when one has a data set and wishes to simulate additional data
under the same distribution. First a random forest object is fitted on the original
data using the \code{randomForestSRC} package. Next this object is provided as an
argument to the \code{simEventRF} function, which simulates new data using the random forest.
Simulation proceeds by sampling from the uniform distribution and obtaining event times using
the inverse of the cumulative hazard function(s).
}
\details{
The function simulates individual event histories by:
\enumerate{
\item Sampling initial baseline covariates (\code{L0}, \code{A0}) by resampling observed values.
\item Extracting cumulative hazard functions from the RF model.
\item Iteratively sampling event times.
\item Updating covariate histories and event counts.
\item Stopping simulation per individual after a terminal event or maximum events reached.
}
}
\examples{
# The observed data
beta = matrix(c(0.5,-1,-0.5,0.5,0,0.5), ncol = 3, nrow = 2)
data <- simCRdata(N = 100, beta = beta)
# Random forest model
RF_fit <- randomForestSRC::rfsrc(Surv(Time, Delta) ~ L0 + A0, data = data)
# New data
list_old_vars <- list(L0 = data$L0, A0 = data$A0)
new_data <- simEventRF(100, RF_fit, list_old_vars = list_old_vars, term_events = c(1,2))

}
